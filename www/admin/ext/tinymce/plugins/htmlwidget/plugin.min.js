tinymce.PluginManager.add('htmlwidget',function(f,g){function ViewWidget(){f.windowManager.open({title:'Danh sách Widget',url:g+'/dialog.html',width:f.getParam('widget_popup_width',700),height:f.getParam('widget_popup_height',400),buttons:[{text:'Thêm widget',onclick:function(){var a=f.windowManager.getWindows()[0],ifr=a.getContentWindow().document,widget=$(ifr).find('#content').html();if(widget!=''){var b=widget+'<p>&nbsp;</p>';f.insertContent(b);a.close()}else{f.windowManager.alert('Vui lòng chọn widget!')}}},{text:'Close',onclick:'close'}]},{editor:f,wglist:f.getParam('widget_list_url')})}f.on('init',function(){var e=f.getParam('widget_list_url');$.get(e,function(b){var c='';$.each(b.style,function(i,a){f.contentCSS.push(a);c+='<link href="'+a+'" rel="stylesheet">'});if(c!=''){var d=$(f.getDoc()).find('head link:first');d.before(c)}},"json")});f.addButton('htmlwidget',{icon:'template',tooltip:'Thêm widget',onclick:ViewWidget});f.addMenuItem('htmlwidget',{icon:'template',text:'Thêm widget',context:'insert',onclick:ViewWidget})});